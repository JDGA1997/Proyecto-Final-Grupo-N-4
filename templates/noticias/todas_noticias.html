<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOTICIAS | INICIO</title>
</head>

<body>
    <H1>TODAS LAS NOTICIAS DEL PORTAL</H1>

    <!-- Enlaces de navegaci√≥n -->
    <p>
        <a href="{% url 'crear_noticia' %}" style="background-color: green; color: white; padding: 5px 10px; text-decoration: none;">‚ûï Crear Nueva Noticia</a>
        <a href="{% url 'inicio' %}">üè† Ir al Inicio</a>
    </p>

    <form method="get" style="margin-left: 50px;">
        <input type="text" name="categoria" placeholder="Buscar categor√≠a..." value="{{categoria_seleccionada}}">
        <button type="submit">Buscar</button>
    </form>

    <p>
        <a href="?">Limpiar filtros</a>
        <a href="?categoria=politica">Pol√≠tica</a>
        <a href="?categoria=tecnologia">Tecnolog√≠a</a>
        <a href="?categoria=deportes">Deportes</a>
    </p>

    <!-- Lista de noticias -->
    {% if noticias %}
        {% for noticia in noticias %}
            <article style="border: 1px solid #ccc; padding: 15px; margin: 10px 0;">
                <h3>
                    <a href="{% url 'una_noticia' noticia.noticia_id %}">{{noticia.titulo}}</a>
                </h3>
                <h4>{{noticia.subtitulo}}</h4>
                <p><small>Autor: {{ noticia.autor.nombre }} | Fecha: {{ noticia.fecha }}</small></p>
                <small>Categorias: {{ noticia.categorias.all|join:', ' }}</small>
                <p>{{noticia.contenido|truncatewords:20}}</p>
                
                <!-- Acciones CRUD -->
                <div style="margin-top: 10px;">
                    <a href="{% url 'una_noticia' noticia.noticia_id %}" style="color: blue;">üëÅÔ∏è Ver</a> |
                    <a href="{% url 'actualizar_noticia' noticia.noticia_id %}" style="color: orange;">‚úèÔ∏è Editar</a> |
                    <a href="{% url 'eliminar_noticia' noticia.noticia_id %}" style="color: red;">üóëÔ∏è Eliminar</a>
                </div>
            </article>
            <hr>
        {% endfor %}
    {% else %}
        <p><em>No se encontraron noticias{% if categoria_seleccionada %} para la categor√≠a "{{ categoria_seleccionada }}"{% endif %}.</em></p>
        <p><a href="{% url 'crear_noticia' %}">¬øQuieres crear la primera noticia?</a></p>
    {% endif %}

</body>

</html>